{"remainingRequest":"D:\\项目\\vue\\travel\\travel\\node_modules\\babel-loader\\lib\\index.js!D:\\项目\\vue\\travel\\travel\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\项目\\vue\\travel\\travel\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\index.js??ref--0-1!D:\\项目\\vue\\travel\\travel\\src\\pages\\city\\components\\Search.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\项目\\vue\\travel\\travel\\src\\pages\\city\\components\\Search.vue","mtime":1594129937917},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IEJzY3JvbGwgZnJvbSAnYmV0dGVyLXNjcm9sbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2l0eVNlYXJjaCcsCiAgcHJvcHM6IFsnY2l0aWVzJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleXdvcmQ6ICcnLAogICAgICBsaXN0OiBbXSwKICAgICAgdGltZXI6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaXR5Q2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNpdHlDbGljayhjaXR5KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlQ2l0eScsIGNpdHkpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhhc05vRGF0YTogZnVuY3Rpb24gaGFzTm9EYXRhKCkgewogICAgICByZXR1cm4gIXRoaXMubGlzdC5sZW5ndGg7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5zY3JvbGwgPSBuZXcgQnNjcm9sbCh0aGlzLiRyZWZzLnNlYXJjaCwge30pOwogIH0sCiAgd2F0Y2g6IHsKICAgIGtleXdvcmQ6IGZ1bmN0aW9uIGtleXdvcmQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy50aW1lcikgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmtleXdvcmQpIHsKICAgICAgICB0aGlzLmxpc3QgPSBbXTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CgogICAgICAgIGZvciAodmFyIGkgaW4gX3RoaXMuY2l0aWVzKSB7CiAgICAgICAgICBfdGhpcy5jaXRpZXNbaV0uZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlLnNwZWxsLmluZGV4T2YoX3RoaXMua2V5d29yZCkgPiAtMSB8fCB2YWx1ZS5uYW1lLmluZGV4T2YoX3RoaXMua2V5d29yZCkgPiAtMSkgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5saXN0ID0gcmVzdWx0OwogICAgICB9LCAxMDApOwogICAgfQogIH0KfTs="},{"version":3,"sources":["D:\\项目\\vue\\travel\\travel\\src\\pages\\city\\components\\Search.vue"],"names":[],"mappings":";;;;;;AAyBA,OAAO,OAAP,MAAoB,eAApB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,YADO;AAEb,EAAA,KAAK,EAAE,CAAC,QAAD,CAFM;AAGb,EAAA,IAHa,kBAGL;AACN,WAAO;AACL,MAAA,OAAO,EAAE,EADJ;AAEL,MAAA,IAAI,EAAE,EAFD;AAGL,MAAA,KAAK,EAAE;AAHF,KAAP;AAKD,GATY;AAUb,EAAA,OAAO,EAAE;AACP,IAAA,eADO,2BACU,IADV,EACgB;AACrB,WAAK,MAAL,CAAY,MAAZ,CAAmB,YAAnB,EAAiC,IAAjC;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACF;AAJO,GAVI;AAgBb,EAAA,QAAQ,EAAE;AACR,IAAA,SADQ,uBACK;AACX,aAAO,CAAC,KAAK,IAAL,CAAU,MAAlB;AACF;AAHQ,GAhBG;AAqBb,EAAA,OArBa,qBAqBF;AACT,SAAK,MAAL,GAAc,IAAI,OAAJ,CAAY,KAAK,KAAL,CAAW,MAAvB,EAA+B,EAA/B,CAAd;AACD,GAvBY;AAwBb,EAAA,KAAK,EAAE;AACL,IAAA,OADK,qBACM;AAAA;;AACT,UAAI,KAAK,KAAT,EAAgB;AACd,QAAA,YAAY,CAAC,KAAK,KAAN,CAAZ;AACF;;AACA,UAAI,CAAC,KAAK,OAAV,EAAmB;AACjB,aAAK,IAAL,GAAY,EAAZ;AACA;AACF;;AACA,WAAK,KAAL,GAAa,UAAU,CAAC,YAAM;AAC5B,YAAM,MAAK,GAAI,EAAf;;AACA,aAAK,IAAI,CAAT,IAAc,KAAI,CAAC,MAAnB,EAA2B;AACzB,UAAA,KAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,OAAf,CAAuB,UAAC,KAAD,EAAW;AAChC,gBAAI,KAAK,CAAC,KAAN,CAAY,OAAZ,CAAoB,KAAI,CAAC,OAAzB,IAAoC,CAAC,CAArC,IACF,KAAK,CAAC,IAAN,CAAW,OAAX,CAAmB,KAAI,CAAC,OAAxB,IAAmC,CAAC,CADtC,EACyC;AACvC,cAAA,MAAM,CAAC,IAAP,CAAY,KAAZ;AACF;AACD,WALD;AAMF;;AACA,QAAA,KAAI,CAAC,IAAL,GAAY,MAAZ;AACD,OAXsB,EAWpB,GAXoB,CAAvB;AAYF;AArBK;AAxBM,CAAf","sourcesContent":["<template>\n  <div>\n    <div class=\"search\">\n      <input class=\"search-input\" type=\"text\" placeholder=\"输入城市名或拼音\" v-model=\"keyword\">\n    </div>\n    <div\n      class=\"search-content\"\n      ref=\"search\"\n      v-show=\"keyword\"\n    >\n      <ul>\n        <li\n          class=\"search-item border-bottom\"\n          v-for=\"item of list\"\n          :key=\"item.id\"\n          @click=\"handleCityClick(item.name)\"\n        >\n          {{item.name}}\n        </li>\n        <li class=\"search-item border-bottom\" v-show=\"hasNoData\">没有找到匹配数据</li>\n      </ul>\n    </div>\n  </div>\n</template>\n<script>\nimport Bscroll from 'better-scroll'\nexport default {\n  name: 'CitySearch',\n  props: ['cities'],\n  data () {\n    return {\n      keyword: '',\n      list: [],\n      timer: null\n    }\n  },\n  methods: {\n    handleCityClick (city) {\n      this.$store.commit('changeCity', city)\n      this.$router.push('/')\n    }\n  },\n  computed: {\n    hasNoData () {\n      return !this.list.length\n    }\n  },\n  mounted () {\n    this.scroll = new Bscroll(this.$refs.search, {})\n  },\n  watch: {\n    keyword () {\n      if (this.timer) {\n        clearTimeout(this.timer)\n      }\n      if (!this.keyword) {\n        this.list = []\n        return\n      }\n      this.timer = setTimeout(() => {\n        const result = []\n        for (let i in this.cities) {\n          this.cities[i].forEach((value) => {\n            if (value.spell.indexOf(this.keyword) > -1 ||\n              value.name.indexOf(this.keyword) > -1) {\n              result.push(value)\n            }\n          })\n        }\n        this.list = result\n      }, 100)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped>\n  @import \"~styles/varibles.styl\"\n  .search\n    height .72rem\n    padding 0 .1rem\n    background $bgColor\n    .search-input\n      box-sizing border-box\n      height .62rem\n      line-height .62rem\n      width 100%\n      padding 0 .1rem\n      line-height .62rem\n      text-align center\n      border-radius .06rem\n      color #666\n  .search-content\n    z-index 1\n    position absolute\n    overflow hidden\n    top 1.58rem\n    left 0\n    right 0\n    bottom 0\n    background #eee\n    .search-item\n      line-height .62rem\n      padding-left .2rem\n      background #fff\n      color #666\n</style>\n"],"sourceRoot":""}]}