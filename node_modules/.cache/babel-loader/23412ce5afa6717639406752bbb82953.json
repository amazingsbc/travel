{"remainingRequest":"D:\\项目\\vue\\travel\\travel\\node_modules\\babel-loader\\lib\\index.js!D:\\项目\\vue\\travel\\travel\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\项目\\vue\\travel\\travel\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\index.js??ref--0-1!D:\\项目\\vue\\travel\\travel\\src\\pages\\home\\Home.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\项目\\vue\\travel\\travel\\src\\pages\\home\\Home.vue","mtime":1594277207057},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\vue\\travel\\travel\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovXHU5ODc5XHU3NkVFL3Z1ZS90cmF2ZWwvdHJhdmVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8gQ29tcG9zaXRvbiBBUEkKaW1wb3J0IEhvbWVIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL0hlYWRlcic7CmltcG9ydCBIb21lU3dpcGVyIGZyb20gJy4vY29tcG9uZW50cy9Td2lwZXInOwppbXBvcnQgSG9tZUljb25zIGZyb20gJy4vY29tcG9uZW50cy9JY29ucyc7CmltcG9ydCBIb21lUmVjb21tZW5kIGZyb20gJy4vY29tcG9uZW50cy9SZWNvbW1lbmQnOwppbXBvcnQgSG9tZVdlZWtlbmQgZnJvbSAnLi9jb21wb25lbnRzL1dlZWtlbmQnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyByZWFjdGl2ZSwgY29tcHV0ZWQsIG9uTW91bnRlZCwgb25BY3RpdmF0ZWQgfSBmcm9tICd2dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudHM6IHsKICAgIEhvbWVIZWFkZXI6IEhvbWVIZWFkZXIsCiAgICBIb21lU3dpcGVyOiBIb21lU3dpcGVyLAogICAgSG9tZUljb25zOiBIb21lSWNvbnMsCiAgICBIb21lUmVjb21tZW5kOiBIb21lUmVjb21tZW5kLAogICAgSG9tZVdlZWtlbmQ6IEhvbWVXZWVrZW5kCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAvLyDoh6rlt7HlrprkuYnnmoRkYXRh5LiN5YW35aSH5ZON5bqU5byP5aSE55CGCiAgICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgc3dpcGVyTGlzdDogW10sCiAgICAgIGljb25MaXN0OiBbXSwKICAgICAgcmVjb21tZW5kTGlzdDogW10sCiAgICAgIHdlZWtlbmRMaXN0OiBbXQogICAgfSk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgdmFyIGNpdHkgPSBzdG9yZS5zdGF0ZS5jaXR5OyAvLyBjb25zdCBjaXR5ID0gY29tcHV0ZWQoKCk9PiB7CiAgICAvLyAgIHJldHVybiBzdG9yZS5zdGF0ZS5jaXR5CiAgICAvLyB9KQogICAgLy8g6L+Z6YeM5Y+Y5oiQ5LqGYXN5bmMg5Ye95pWw77yMIOS7peWJjeaYr+S9v+eUqHByb21pc2UgLnRoZW4g6L+b6KGM6LCD55SoCgogICAgZnVuY3Rpb24gZ2V0SG9tZUluZm8oKSB7CiAgICAgIHJldHVybiBfZ2V0SG9tZUluZm8uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfZ2V0SG9tZUluZm8oKSB7CiAgICAgIF9nZXRIb21lSW5mbyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCcvYXBpL2luZGV4Lmpzb24/Y2l0eT0nICsgY2l0eS52YWx1ZSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXMgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5yZXQgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgIGRhdGEuc3dpcGVyTGlzdCA9IHJlc3VsdC5zd2lwZXJMaXN0OwogICAgICAgICAgICAgICAgICBkYXRhLmljb25MaXN0ID0gcmVzdWx0Lmljb25MaXN0OwogICAgICAgICAgICAgICAgICBkYXRhLnJlY29tbWVuZExpc3QgPSByZXN1bHQucmVjb21tZW5kTGlzdDsKICAgICAgICAgICAgICAgICAgZGF0YS53ZWVrZW5kTGlzdCA9IHJlc3VsdC53ZWVrZW5kTGlzdDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9nZXRIb21lSW5mby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGdldEhvbWVJbmZvKCk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IGRhdGEKICAgIH07CiAgfSAvLyBkYXRhICgpIHsKICAvLyAgIHJldHVybiB7CiAgLy8gICAgIGxhc3RDaXR5OiAnJywKICAvLyAgICAgc3dpcGVyTGlzdDogW10sCiAgLy8gICAgIGljb25MaXN0OiBbXSwKICAvLyAgICAgcmVjb21tZW5kTGlzdDogW10sCiAgLy8gICAgIHdlZWtlbmRMaXN0OiBbXQogIC8vICAgfQogIC8vIH0sCiAgLy8gY29tcHV0ZWQ6IHsKICAvLyAgIC4uLm1hcFN0YXRlKFsnY2l0eSddKQogIC8vIH0sCiAgLy8gbWV0aG9kczogewogIC8vICAgZ2V0SG9tZUluZm8gKCkgewogIC8vICAgICBheGlvcy5nZXQoJy9hcGkvaW5kZXguanNvbj9jaXR5PScgKyB0aGlzLmNpdHkpCiAgLy8gICAgICAgLnRoZW4odGhpcy5nZXRIb21lSW5mb1N1Y2MpCiAgLy8gICB9LAogIC8vICAgZ2V0SG9tZUluZm9TdWNjIChyZXMpIHsKICAvLyAgICAgcmVzID0gcmVzLmRhdGEKICAvLyAgICAgaWYgKHJlcy5yZXQgJiYgcmVzLmRhdGEpIHsKICAvLyAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEKICAvLyAgICAgICB0aGlzLnN3aXBlckxpc3QgPSBkYXRhLnN3aXBlckxpc3QKICAvLyAgICAgICB0aGlzLmljb25MaXN0ID0gZGF0YS5pY29uTGlzdAogIC8vICAgICAgIHRoaXMucmVjb21tZW5kTGlzdCA9IGRhdGEucmVjb21tZW5kTGlzdAogIC8vICAgICAgIHRoaXMud2Vla2VuZExpc3QgPSBkYXRhLndlZWtlbmRMaXN0CiAgLy8gICAgIH0KICAvLyAgIH0KICAvLyB9LAogIC8vIG1vdW50ZWQgKCkgewogIC8vICAgdGhpcy5sYXN0Q2l0eSA9IHRoaXMuY2l0eQogIC8vICAgdGhpcy5nZXRIb21lSW5mbygpCiAgLy8gfSwKICAvLyBhY3RpdmF0ZWQgKCkgewogIC8vICAgaWYgKHRoaXMubGFzdENpdHkgIT09IHRoaXMuY2l0eSkgewogIC8vICAgICB0aGlzLmxhc3RDaXR5ID0gdGhpcy5jaXR5CiAgLy8gICAgIHRoaXMuZ2V0SG9tZUluZm8oKQogIC8vICAgfQogIC8vIH0KCn07"},{"version":3,"sources":["D:\\项目\\vue\\travel\\travel\\src\\pages\\home\\Home.vue"],"names":[],"mappings":";;AAUA;AACA,OAAO,UAAP,MAAuB,qBAAvB;AACA,OAAO,UAAP,MAAuB,qBAAvB;AACA,OAAO,SAAP,MAAsB,oBAAtB;AACA,OAAO,aAAP,MAA0B,wBAA1B;AACA,OAAO,WAAP,MAAwB,sBAAxB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,QAAT,EAAkB,QAAlB,EAA4B,SAA5B,EAAuC,WAAvC,QAA0D,KAA1D;AAEA,eAAc;AACZ,EAAA,IAAI,EAAE,MADM;AAEV,EAAA,UAAU,EAAE;AACZ,IAAA,UAAU,EAAV,UADY;AAEZ,IAAA,UAAU,EAAV,UAFY;AAGZ,IAAA,SAAS,EAAT,SAHY;AAIZ,IAAA,aAAa,EAAb,aAJY;AAKZ,IAAA,WAAU,EAAV;AALY,GAFF;AASZ,EAAA,KATY,mBASJ;AACN;AACA,QAAM,IAAG,GAAI,QAAQ,CAAC;AACpB,MAAA,UAAU,EAAE,EADQ;AAEpB,MAAA,QAAQ,EAAE,EAFU;AAGpB,MAAA,aAAa,EAAE,EAHK;AAIpB,MAAA,WAAW,EAAE;AAJO,KAAD,CAArB;AAMA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,IAAG,GAAI,KAAK,CAAC,KAAN,CAAY,IAAzB,CATM,CAUN;AACA;AACA;AACJ;;AAbU,aAcS,WAdT;AAAA;AAAA;;AAAA;AAAA,6EAcN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACkB,KAAK,CAAC,GAAN,CAAU,0BAA0B,IAAI,CAAC,KAAzC,CADlB;;AAAA;AACM,gBAAA,GADN;AAEE,gBAAA,GAAE,GAAI,GAAG,CAAC,IAAV;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,oBAAI,GAAG,CAAC,GAAJ,IAAW,GAAG,CAAC,IAAnB,EAAyB;AACjB,kBAAA,MADiB,GACR,GAAG,CAAC,IADI;AAEvB,kBAAA,IAAI,CAAC,UAAL,GAAkB,MAAM,CAAC,UAAzB;AACA,kBAAA,IAAI,CAAC,QAAL,GAAgB,MAAM,CAAC,QAAvB;AACA,kBAAA,IAAI,CAAC,aAAL,GAAqB,MAAM,CAAC,aAA5B;AACA,kBAAA,IAAI,CAAC,WAAL,GAAmB,MAAM,CAAC,WAA1B;AACF;;AAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAdM;AAAA;AAAA;;AA0BN,IAAA,SAAS,CAAC,YAAI;AACZ,MAAA,WAAW;AACZ,KAFQ,CAAT;AAGA,WAAO;AAAE,MAAA,IAAG,EAAH;AAAF,KAAP;AACF,GAvCY,CAwCZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA7EY,CAAd","sourcesContent":["<template>\n  <div>\n    <home-header></home-header>\n    <home-swiper :list=\"data.swiperList\"></home-swiper>\n    <home-icons :iconList=\"data.iconList\"></home-icons>\n    <home-recommend :recommendList=\"data.recommendList\"></home-recommend>\n    <home-weekend :weekendList=\"data.weekendList\"></home-weekend>\n  </div>\n</template>\n<script>\n// Compositon API\nimport HomeHeader from './components/Header'\nimport HomeSwiper from './components/Swiper'\nimport HomeIcons from './components/Icons'\nimport HomeRecommend from './components/Recommend'\nimport HomeWeekend from './components/Weekend'\nimport axios from 'axios'\nimport { useStore } from 'vuex'\nimport { reactive,computed, onMounted, onActivated } from 'vue'\n\nexport default{\n  name: 'Home',\n    components: {\n    HomeHeader,\n    HomeSwiper,\n    HomeIcons,\n    HomeRecommend,\n    HomeWeekend\n  },\n  setup() {\n    // 自己定义的data不具备响应式处理\n    const data = reactive({\n      swiperList: [],\n      iconList: [],\n      recommendList: [],\n      weekendList: []\n    })\n    const store = useStore();\n    const city = store.state.city\n    // const city = computed(()=> {\n    //   return store.state.city\n    // })\n// 这里变成了async 函数， 以前是使用promise .then 进行调用\n    async function getHomeInfo() {\n      let res = await axios.get('/api/index.json?city=' + city.value)\n      res = res.data\n      console.log(res)\n      if (res.ret && res.data) {\n        const result = res.data\n        data.swiperList = result.swiperList\n        data.iconList = result.iconList\n        data.recommendList = result.recommendList\n        data.weekendList = result.weekendList\n      }\n    }\n    onMounted(()=>{\n      getHomeInfo()\n    })\n    return { data }\n  }\n  // data () {\n  //   return {\n  //     lastCity: '',\n  //     swiperList: [],\n  //     iconList: [],\n  //     recommendList: [],\n  //     weekendList: []\n  //   }\n  // },\n  // computed: {\n  //   ...mapState(['city'])\n  // },\n  // methods: {\n  //   getHomeInfo () {\n  //     axios.get('/api/index.json?city=' + this.city)\n  //       .then(this.getHomeInfoSucc)\n  //   },\n  //   getHomeInfoSucc (res) {\n  //     res = res.data\n  //     if (res.ret && res.data) {\n  //       const data = res.data\n  //       this.swiperList = data.swiperList\n  //       this.iconList = data.iconList\n  //       this.recommendList = data.recommendList\n  //       this.weekendList = data.weekendList\n  //     }\n  //   }\n  // },\n  // mounted () {\n  //   this.lastCity = this.city\n  //   this.getHomeInfo()\n  // },\n  // activated () {\n  //   if (this.lastCity !== this.city) {\n  //     this.lastCity = this.city\n  //     this.getHomeInfo()\n  //   }\n  // }\n}\n</script>\n\n<style></style>\n"],"sourceRoot":""}]}